{% extends "base.html" %}

{% block content %}
<div class="page-container" style="padding-top: 20px;">
    <div class="page-header">
        <div class="page-header-title">
            <h1 class="title">XP ≈Ωeb≈ô√≠ƒçek</h1>
            <p style="color: var(--text-secondary);">Nejaktivnƒõj≈°√≠ ƒçlenov√© komunity</p>
        </div>
        <div class="page-header-actions">

        </div>
    </div>

    <div class="card" style="padding: 0; overflow: hidden;">
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 60px; text-align: center;">#</th>
                        <th>U≈æivatel</th>
                        <th>Level</th>
                        <th>XP Progress</th>
                        <th style="text-align: right;">Celkem XP</th>
                    </tr>
                </thead>
                <tbody>
                    {% for u in leaderboard %}
                    {% set row_class = "" %}
                    {% if u.rank == 1 %} {% set row_class = "rank-gold" %}
                    {% elif u.rank == 2 %} {% set row_class = "rank-silver" %}
                    {% elif u.rank == 3 %} {% set row_class = "rank-bronze" %}
                    {% endif %}

                    <tr class="{{ row_class }}">
                        <td style="text-align: center; font-weight: 700; font-size: 1.1rem;">
                            {% if u.rank == 1 %}ü•á
                            {% elif u.rank == 2 %}ü•à
                            {% elif u.rank == 3 %}ü•â
                            {% else %}
                            {{ u.rank }}
                            {% endif %}
                        </td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div class="avatar-wrapper">
                                    {% if u.avatar %}
                                    {% if u.avatar.startswith('http') %}
                                    <img src="{{ u.avatar }}" alt="{{ u.username }}">
                                    {% else %}
                                    <img src="https://cdn.discordapp.com/avatars/{{ u.user_id }}/{{ u.avatar }}.png"
                                        alt="{{ u.username }}">
                                    {% endif %}
                                    {% else %}
                                    <div class="avatar-placeholder">{{ u.username[0]|upper }}</div>
                                    {% endif %}
                                </div>
                                <span style="font-weight: 600;">{{ u.username }}</span>
                            </div>
                        </td>
                        <td>
                            <div class="level-badge">Lvl {{ u.level }}</div>
                        </td>
                        <td style="width: 30%;">
                            <div class="xp-bar-container">
                                <div class="xp-bar-fill" style="width: {{ u.progress }}%;"></div>
                                <span class="xp-text">{{ u.progress }}% k dal≈°√≠mu</span>
                            </div>
                        </td>
                        <td style="text-align: right; font-family: monospace; font-size: 1.1rem; color: var(--accent);">
                            {{ "{:,}".format(u.xp).replace(',', ' ') }}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 40px; color: var(--text-secondary);">
                            Zat√≠m ≈æ√°dn√° data.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    /* Premium Rank Styling */
    .rank-gold {
        background: radial-gradient(circle at left, rgba(234, 179, 8, 0.15) 0%, transparent 70%) !important;
        border-left: 3px solid #EAB308 !important;
    }

    .rank-silver {
        background: radial-gradient(circle at left, rgba(148, 163, 184, 0.15) 0%, transparent 70%) !important;
        border-left: 3px solid #94A3B8 !important;
    }

    .rank-bronze {
        background: radial-gradient(circle at left, rgba(180, 83, 9, 0.15) 0%, transparent 70%) !important;
        border-left: 3px solid #B45309 !important;
    }

    .level-badge {
        background: rgba(139, 92, 246, 0.1);
        color: var(--accent);
        padding: 4px 10px;
        border-radius: 8px;
        font-weight: 700;
        font-size: 0.9rem;
        display: inline-block;
        border: 1px solid rgba(139, 92, 246, 0.2);
    }

    /* XP Bar */
    .xp-bar-container {
        background: rgba(255, 255, 255, 0.05);
        height: 14px;
        border-radius: 7px;
        overflow: hidden;
        position: relative;
    }

    .xp-bar-fill {
        background: var(--primary-gradient);
        height: 100%;
        border-radius: 7px;
    }

    .xp-text {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 9px;
        font-weight: 700;
        color: white;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
    }
</style>
{% endblock %}